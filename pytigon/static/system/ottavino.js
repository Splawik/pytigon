var ottavino=function(e){"use strict";var t;!function(e){e[e.NF=0]="NF",e[e.IS=1]="IS",e[e.TM=2]="TM"}(t||(t={}));const n=e=>{if(e instanceof HTMLTemplateElement)return e;{const t=document.createElement("template");return t.innerHTML=e,t}},o=e=>{if(e instanceof HTMLElement)return e;const o=(e=>{try{const n=document.querySelector(e);return n||t.NF}catch{return t.IS}})(e);return o instanceof HTMLElement?o:n(e)},r=(e,t,n="")=>{const o={};return[o,new Proxy(e,{get:(i,c)=>(o.hasOwnProperty(c)||("object"!=typeof e[c]||e[c]instanceof HTMLElement?o[c]=e[c]:(o[c]=r(e[c],t,n+c+".")[1],o[c].__prefix=n)),o[c]),set:(e,i,c)=>("object"==typeof c?(o[i]=r(c,t,n+i+".")[1],o[i].__prefix=n):o[i]=c,t(n+i),!0)})]},i=/(\{\{([^\{|^\}]+)\}\})/gi,c=e=>{let t,n=[];const o=/(this\.[\w+|\d*]*)+/gi;for(;t=o.exec(e);)n.push(t[1]);return{paths:n,expression:e,expressions:n.length&&e.match(i)||[]}},s=(e,t,n,o=[])=>{const i={},s=(e,t)=>{i[e]?i[e].push(t):i[e]=[t]},a=(e=>t=>{Object.keys(e).forEach(n=>n.startsWith("this."+t)?e[n].forEach(e=>e()):void 0)})(i);let l=r(t,a)[1];const u=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT);let d=u.nextNode();for(;d;){if(d.nodeType===Node.ELEMENT_NODE){Array.from(d.attributes).forEach(e=>{const{expression:r,paths:i}=c(e.nodeValue);if(o.forEach(o=>{if(o.attribute===e.nodeName||o.attribute(e)){requestAnimationFrame(()=>{e.ownerElement.removeAttribute(e.nodeName)});const c=o.process({attribute:e,componentHandler:t,expression:r,paths:i,componentNode:n,targetNode:e.ownerElement});if(c){const e=new Function("return "+r.slice(2,-2)+";");i.forEach(t=>s(t,()=>{const t=e.call(l);c(t)}))}}}),e.nodeValue.includes("{{")&&r)if(e.nodeName.startsWith("on")){const t=e.nodeName.slice(2),o=new Function("event","component",r.slice(2,-2)+";");d.setAttribute("on"+t,""),d.removeAttribute("on"+t),d["on"+t]=(e=>{o.call(l,e,n)})}else i.forEach(t=>{const o=new Function("component","return "+r.slice(2,-2)+";");s(t,()=>{e.nodeValue=String(o.call(l,n))})})}),d=u.nextNode();continue}if(!(d.nodeValue||"").includes("{{")){d=u.nextNode();continue}const{expression:e,expressions:r,paths:i}=c(d.nodeValue);if(e){const e=d.nodeValue||"",t=r.reduce((e,t)=>(e[t]=new Function("component",`return ${t.slice(2,-2).trim()}`),e),{}),n=d,o=()=>Object.keys(t).reduce((e,n)=>{const o=t[n].call(l);let r=void 0===o?"":o;return e.split(n).join(r)},e);i.forEach(e=>{s(e,()=>{n.data=o()})})}d=u.nextNode()}return[l,a]},a=[],l=e=>{const{TM:n}=t,r=o(e);return{template:null,shadow:!1,data:{},[n]:{mountPoint:r,root:r},initialize:function(e){const{properties:t,closed:o,directives:r}=e,i=this[n].mountPoint;this.shadow&&null===i.shadowRoot&&(this[n].root=i.attachShadow({mode:o?"closed":"open"}));const c=this.template.content.cloneNode(!0),[l,u]=s(c,this.data,i,[...a,...r||[]]);return t&&Object.entries(t).forEach(([e,t])=>{l[e]=t,Object.defineProperty(i,e,{get:()=>l[e],set:t=>l[e]=t})}),u(),[c,l,i]},render:function(e){const t=this[n].root;this.shadow?t.appendChild(e):requestAnimationFrame(()=>{t.appendChild(e)})}}};function u(e){if(!e.mount&&e.tag)return d(e);const t=l(e.mount);t.template=n(e.template),t.shadow=!!e.shadow,t.data=e.this||{};const[o,r,i]=t.initialize(e);return"function"==typeof e.init&&e.init.call(r,i),t.render(o),r}const d=e=>{customElements.define(e.tag,class extends HTMLElement{constructor(){super(...arguments),this.proxy=u({...e,mount:this})}static get observedAttributes(){return e.attributes?Object.keys(e.attributes):[]}connectedCallback(){"function"==typeof e.connectedCallback&&e.connectedCallback.call(this.proxy,this)}disconnectedCallback(){"function"==typeof e.disconnectedCallback&&e.disconnectedCallback.call(this.proxy,this)}attributeChangedCallback(t,n,o){e.attributes&&"function"==typeof e.attributes[t]&&e.attributes[t].call(this.proxy,o,n,this)}})};return e.component=u,e.parse=c,e.registerDirective=function(e){a.indexOf(e)<0&&a.push(e)},e}({});
