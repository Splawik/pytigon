'use strict';import{AssertionError,AttributeError,BaseException,DeprecationWarning,Exception,IndexError,IterableError,KeyError,NotImplementedError,RuntimeWarning,StopIteration,UserWarning,ValueError,Warning,__JsIterator__,__PyIterator__,__Terminal__,__add__,__and__,__call__,__class__,__envir__,__eq__,__floordiv__,__ge__,__get__,__getcm__,__getitem__,__getslice__,__getsm__,__gt__,__i__,__iadd__,__iand__,__idiv__,__ijsmod__,__ilshift__,__imatmul__,__imod__,__imul__,__in__,__init__,__ior__,__ipow__,
__irshift__,__isub__,__ixor__,__jsUsePyNext__,__jsmod__,__k__,__kwargtrans__,__le__,__lshift__,__lt__,__matmul__,__mergefields__,__mergekwargtrans__,__mod__,__mul__,__ne__,__neg__,__nest__,__or__,__pow__,__pragma__,__proxy__,__pyUseJsNext__,__rshift__,__setitem__,__setproperty__,__setslice__,__sort__,__specialattrib__,__sub__,__super__,__t__,__terminal__,__truediv__,__withblock__,__xor__,abs,all,any,assert,bool,bytearray,bytes,callable,chr,copy,deepcopy,delattr,dict,dir,divmod,enumerate,filter,float,
getattr,hasattr,input,int,isinstance,issubclass,len,list,map,max,min,object,ord,pow,print,property,py_TypeError,py_iter,py_metatype,py_next,py_reversed,py_typeof,range,repr,round,set,setattr,sorted,str,sum,tuple,zip}from"./org.transcrypt.__runtime__.js";import{load_css,load_many_js}from"./pytigon_js.tools.js";var __name__="pytigon_js.component";export var set_state=function(component,state){var spec=tuple(["!","?","*","0","+","-","%"]);if(__in__("state_actions",component.options))var state_actions=
component.options["state_actions"];else var state_actions=[];for(var key of Object.keys(state)){var value=state[key];if(component.root!=null)for(var c of tuple([component.root,component])){var nodes=c.querySelectorAll('[data-bind*="'+key+'"]');for(var node of nodes){var xx=node.getAttribute("data-bind");for(var x of xx.py_split(";")){if(!x.lower().endswith(key.lower()))continue;var mod_fun=null;if(__in__(":",x)){var x2=x.py_split(":",1);var element_selector=x2[0];var data_selector=x2[1];if(__in__(data_selector[0],
spec)){var mod_fun=data_selector[0];var data_selector=data_selector.__getslice__(1,null,1)}if(!element_selector)var element_selector=data_selector}else{var element_selector="";var data_selector=x;if(__in__(data_selector[0],spec)){var mod_fun=data_selector[0];var data_selector=data_selector.__getslice__(1,null,1)}}var value2=value;if(mod_fun)if(mod_fun=="!")var value2=!value;else if(mod_fun=="?")if(value)var value2=true;else var value2=false;else if(mod_fun=="*")var value2=str(value);else if(mod_fun==
"+")var value2=float(value);else if(mod_fun=="-")var value2=-1*float(value);else if(mod_fun=="%")var value2=float(value)/100;if(element_selector)if(element_selector.startswith("style-"))node.style[element_selector.__getslice__(6,null,1)]=value2;else if(element_selector.startswith("attr-")){var old_value=node.getAttribute(element_selector.__getslice__(5,null,1),"");node.setAttribute(element_selector.__getslice__(5,null,1),value2)}else if(element_selector.startswith("class-")){var cls=element_selector.__getslice__(6,
null,1);if(value2)node.classList.add(cls);else node.classList.remove(cls)}else node[element_selector]=value2;else node.innerHTML=value2}}}if(__in__(key,state_actions))if(__in__(key,component.state))state_actions[key](component,component.state[key],value);else state_actions[key](component,null,value);component.state[key]=value}};export var DefineWebComponent=__class__("DefineWebComponent",[object],{__module__:__name__,get __init__(){return __get__(this,function(self,tag,shadow,js,css){if(typeof shadow==
"undefined"||shadow!=null&&shadow.hasOwnProperty("__kwargtrans__"))var shadow=false;if(typeof js=="undefined"||js!=null&&js.hasOwnProperty("__kwargtrans__"))var js=null;if(typeof css=="undefined"||css!=null&&css.hasOwnProperty("__kwargtrans__"))var css=null;self.tag=tag;self.shadow=shadow;self.options=dict({});self.js=js;self.css=css})},get make_component(){return __get__(this,function(self){if(self.js&&__in__("init",self.options)){var init=self.options["init"];var _init=function(component){var _on_loadjs=
function(){init(component)};load_many_js(self.js,_on_loadjs)};self.options["init"]=_init}if(self.css)for(var css of self.css)if(self.shadow)if(__in__("template",self.options))self.options["template"]='<style>@import "'+css+'"</style>\n'+self.options["template"];else self.options["template"]='<style>@import "'+css+'"</style>\n';else load_css(css);if(!__in__("set_state",self.options))self.options["set_state"]=set_state;define_custom_element(self.tag,self.shadow,self.options)})},get fun(){return __get__(this,
function(self,py_name){var decorator=function(funct){self.options[py_name]=funct;return funct};return decorator})},get __enter__(){return __get__(this,function(self){return self})},get __exit__(){return __get__(this,function(self,py_metatype,value,traceback){self.make_component()})}});window.DefineWebComponent=DefineWebComponent;export var GlobalBus=__class__("GlobalBus",[object],{__module__:__name__,get __init__(){return __get__(this,function(self){self.components=[];self.state=dict({})})},get set_state(){return __get__(this,
function(self,state){if(state){var state2=dict(state);for(var [key,value]of state2.py_items())if(!(__in__(key,self.state)&&self.state[key]!=value)){self.state[key]=value;self.emit(key,value)}}})},get emit(){return __get__(this,function(self,py_name,value){for(var component of self.components)if(component)if(hasattr(component,"set_external_state"))component.set_external_state(dict([[py_name,value]]))})},get register(){return __get__(this,function(self,component){if(!__in__(component,self.components)){self.components.append(component);
for(var [key,value]of self.state.py_items())self.emit(key,value)}})},get unregister(){return __get__(this,function(self,component){if(__in__(component,self.components))self.components.remove(component)})}});window.GlobalBus=GlobalBus;

//# sourceMappingURL=pytigon_js.component.map