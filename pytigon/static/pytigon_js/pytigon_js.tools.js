'use strict';import{AssertionError,AttributeError,BaseException,DeprecationWarning,Exception,IndexError,IterableError,KeyError,NotImplementedError,RuntimeWarning,StopIteration,UserWarning,ValueError,Warning,__JsIterator__,__PyIterator__,__Terminal__,__add__,__and__,__call__,__class__,__envir__,__eq__,__floordiv__,__ge__,__get__,__getcm__,__getitem__,__getslice__,__getsm__,__gt__,__i__,__iadd__,__iand__,__idiv__,__ijsmod__,__ilshift__,__imatmul__,__imod__,__imul__,__in__,__init__,__ior__,__ipow__,
__irshift__,__isub__,__ixor__,__jsUsePyNext__,__jsmod__,__k__,__kwargtrans__,__le__,__lshift__,__lt__,__matmul__,__mergefields__,__mergekwargtrans__,__mod__,__mul__,__ne__,__neg__,__nest__,__or__,__pow__,__pragma__,__proxy__,__pyUseJsNext__,__rshift__,__setitem__,__setproperty__,__setslice__,__sort__,__specialattrib__,__sub__,__super__,__t__,__terminal__,__truediv__,__withblock__,__xor__,abs,all,any,assert,bool,bytearray,bytes,callable,chr,copy,deepcopy,delattr,dict,dir,divmod,enumerate,filter,float,
getattr,hasattr,input,int,isinstance,issubclass,len,list,map,max,min,object,ord,pow,print,property,py_TypeError,py_iter,py_metatype,py_next,py_reversed,py_typeof,range,repr,round,set,setattr,sorted,str,sum,tuple,zip}from"./org.transcrypt.__runtime__.js";import*as rc from"./pytigon_js.resources.js";var __name__="pytigon_js.tools";export var LOADED_FILES=dict({});export var FIRST_INIT=true;export var FRAGMENT_INIT_FUN=[];export var RESIZE_FUN=[];export var register_fragment_init_fun=function(fun){FRAGMENT_INIT_FUN.append(fun)};
window.register_fragment_init_fun=register_fragment_init_fun;export var _set_field=function(elem){var f=elem.find("set-field");if(f){var element_sel=f.attr("element");var title=f.attr("title");jQuery(element_sel).html(title)}};register_fragment_init_fun(_set_field);export var fragment_init=function(elem){if(typeof elem=="undefined"||elem!=null&&elem.hasOwnProperty("__kwargtrans__"))var elem=null;if(elem)var elem2=elem;else var elem2=window.ACTIVE_PAGE.page;var format=dict({"singleDatePicker":true,
"showDropdowns":true,"buttonClasses":"btn","applyClass":"btn-success align-top","cancelClass":"btn-danger btn-sm align-top","timePicker24Hour":true,"autoApply":true,"locale":dict({"format":"YYYY-MM-DD","separator":"-","applyLabel":"&nbsp; OK &nbsp;","cancelLabel":"<i class='fa fa-close'></i>"})});var d=elem2.find("div.form-group .datefield input");d.daterangepicker(format);format["locale"]["format"]="YYYY-MM-DD HH:mm";format["timePicker"]=true;format["timePickerIncrement"]=30;var d=elem2.find("div.form-group .datetimefield input");
d.daterangepicker(format);jQuery(".selectpicker").selectpicker();var _on_blur=function(e){if(e["type"]=="focus"||this.value.length>0)var test=true;else var test=false;jQuery(this).parents(".form-group").toggleClass("focused",test)};elem2.find(".label-floating .form-control").on("focus blur",_on_blur).trigger("blur");var load_inline_frame=function(){var frame=jQuery(this);frame.append(INLINE_FRAME_HTML);var obj2=frame.find("div.frame-data-inner");if(obj2.length>0){var url=frame.attr("href");var complete=
function(txt){};ajax_load(obj2,url,complete)}};elem2.find(".inline_frame").each(load_inline_frame);elem2.find(".django-select2:not(.select2-full-width)").djangoSelect2(dict({"width":"calc(100% - 48px)","minimumInputLength":1}));elem2.find(".django-select2.select2-full-width").djangoSelect2(dict({"width":"calc(100%)","minimumInputLength":1}));var init_select2_ctrl=function(){var sel2=jQuery(this);var src=sel2.closest(".input-group");if(src.length==1)if(src[0].hasAttribute("item_id")){var id=src.attr("item_id");
if(id){var text=src.attr("item_str");sel2.append(jQuery("<option>",dict({"value":id,"text":text})));sel2.val(id.toString());sel2.trigger("change")}}};elem2.find(".django-select2").each(init_select2_ctrl);if(window.BASE_FRAGMENT_INIT)window.BASE_FRAGMENT_INIT();for(var fun of FRAGMENT_INIT_FUN)fun(elem2)};window.fragment_init=fragment_init;export var split_html=function(html){var temp=document.createElement("div");temp.innerHTML=html;var scripts=temp.getElementsByTagName("script");var styles=temp.getElementsByTagName("style");
var scripts2=Array.prototype.slice.call(scripts);var styles2=Array.prototype.slice.call(styles);var remove_element=function(element){if(element)element.parentNode.removeChild(element)};var elemets_to_delete=[];for(var script of scripts)elemets_to_delete.append(script);for(var style of styles)elemets_to_delete.append(style);for(var element of elemets_to_delete)remove_element(element);return tuple([temp.innerHTML,scripts2,styles2])};export var eval_scripts=function(scripts){var eval_fun=function(id,
value){eval(value.innerHTML)};jQuery.each(scripts,eval_fun)};export var eval_styles=function(styles,elem){while(styles.length>0){var style=styles.py_pop();styles.attr("scoped","scoped");elem.append(styles)}};export var MOUNT_INIT_FUN=[];export var register_mount_fun=function(fun){MOUNT_INIT_FUN.append(fun)};export var mount_html=function(elem,data_or_html,run_fragment_init,component_init){if(typeof run_fragment_init=="undefined"||run_fragment_init!=null&&run_fragment_init.hasOwnProperty("__kwargtrans__"))var run_fragment_init=
true;if(typeof component_init=="undefined"||component_init!=null&&component_init.hasOwnProperty("__kwargtrans__"))var component_init=true;var _on_remove=function(index,value){value.on_remove()};jQuery.each(elem.find(".call_on_remove"),_on_remove);if(py_typeof(data_or_html)==str)elem.html(data_or_html);else{elem.html("");elem[0].appendChild(data_or_html)}if(MOUNT_INIT_FUN)for(var fun of MOUNT_INIT_FUN)fun(elem);if(elem.hasClass("refr_replace")){var elem_tmp=elem.contents();elem.replaceWith(elem_tmp)}if(run_fragment_init)fragment_init(elem);
process_resize()};export var save_as=function(blob,file_name){var url=window.URL.createObjectURL(blob);var anchor_elem=document.createElement("a");anchor_elem.style="display: none";anchor_elem.href=url;anchor_elem.download=file_name;document.body.appendChild(anchor_elem);anchor_elem.click();document.body.removeChild(anchor_elem);var _=function(){window.URL.revokeObjectURL(url)};setTimeout(_,1E3)};export var download_binary_file=function(buf,content_disposition){var file_name="temp.dat";var var_list=
content_disposition.py_split(";");for(var pos of var_list)if(__in__("filename",pos)){var file_name=pos.py_split("=")[1];break}save_as(buf,file_name)};export var ajax_get=function(url,complete,process_req){if(typeof process_req=="undefined"||process_req!=null&&process_req.hasOwnProperty("__kwargtrans__"))var process_req=null;var req=new XMLHttpRequest;if(process_req)process_req(req);var process_blob=false;try{req.responseType="blob";var process_blob=true}catch(__except0__){}var _onload=function(){if(process_blob){var disp=
req.getResponseHeader("Content-Disposition");if(disp&&__in__("attachment",disp)){download_binary_file(req.response,disp);complete(null)}else{var reader=new FileReader;var _on_reader_load=function(){if(req.status!=200&&req.status!=0){console.log(reader.result);window.open().document.write(reader.result);complete("Error - details on new page")}else complete(reader.result)};reader.onload=_on_reader_load;reader.readAsText(req.response)}}else if(req.status!=200&&req.status!=0){console.log(req.response);
window.open().document.write(req.response);complete("Error - details on new page")}else complete(req.response)};req.onload=_onload;req.open("GET",url,true);req.send(null)};window.ajax_get=ajax_get;export var ajax_load=function(elem,url,complete){var _onload=function(responseText){mount_html(elem,responseText);complete(responseText)};ajax_get(url,_onload)};window.ajax_load=ajax_load;export var _req_post=function(req,url,data,complete,content_type){var process_blob=false;try{req.responseType="blob";
var process_blob=true}catch(__except0__){}print("POST>>>: ",url);var _onload=function(){if(process_blob){var disp=req.getResponseHeader("Content-Disposition");if(disp&&__in__("attachment",disp)){download_binary_file(req.response,disp);complete(null)}else{var reader=new FileReader;var _on_reader_load=function(){if(req.status!=200&&req.status!=0){console.log(reader.result);window.open().document.write(reader.result);complete("Error - details on new page")}print("<<<POST3: ",url);complete(reader.result)};
reader.onload=_on_reader_load;reader.readAsText(req.response)}}else{if(req.status!=200&&req.status!=0){console.log(req.response);window.open().document.write(req.response);complete("Error - details on new page")}complete(req.response)}};req.onload=_onload;req.open("POST",url,true);req.setRequestHeader("X-CSRFToken",Cookies.get("csrftoken"));if(content_type);else req.setRequestHeader("Content-type","application/x-www-form-urlencoded");req.send(data)};export var _req_post_new=function(req,url,data,
complete,content_type){var get_response_text=function(response){return response.text()};var headers={"X-CSRFToken":Cookies.get("csrftoken")};var x1=fetch(url,{"method":"post","headers":headers,"body":data});var x2=x1.then(get_response_text);var x3=x2.then(complete)};export var ajax_post=function(url,data,complete,process_req){if(typeof process_req=="undefined"||process_req!=null&&process_req.hasOwnProperty("__kwargtrans__"))var process_req=null;var req=new XMLHttpRequest;if(process_req)process_req(req);
_req_post(req,url,data,complete)};window.ajax_post=ajax_post;export var ajax_json=function(url,data,complete,process_req){if(typeof process_req=="undefined"||process_req!=null&&process_req.hasOwnProperty("__kwargtrans__"))var process_req=null;var _complete=function(data_in){var _data=JSON.parse(data_in);complete(_data)};var data2=JSON.stringify(data);ajax_post(url,data2,_complete,process_req)};window.ajax_json=ajax_json;export var ajax_submit=function(form,complete,data_filter,process_req){if(typeof data_filter==
"undefined"||data_filter!=null&&data_filter.hasOwnProperty("__kwargtrans__"))var data_filter=null;if(typeof process_req=="undefined"||process_req!=null&&process_req.hasOwnProperty("__kwargtrans__"))var process_req=null;var content_type=null;var req=new XMLHttpRequest;if(process_req)process_req(req);if(form.find("[type='file']").length>0){var data=new FormData(form[0]);if(data_filter)var data=data_filter(data);var content_type="multipart/form-data; boundary=...";if(!(form.find("#progress").length==
1))form.find("div.inline-form-body").append("<div class='progress progress-striped active'><div id='progress' class='progress-bar' role='progressbar' style='width: 0%;'></div></div>");else jQuery("#progress").width("0%");var _progressHandlingFunction=function(e){if(e.lengthComputable)jQuery("#progress").width(""+parseInt(100*e.loaded/e.total)+"%")};req.upload.addEventListener("progress",_progressHandlingFunction,false)}else{var data=form.serialize();if(data_filter)var data=data_filter(data)}_req_post(req,
corect_href(form.attr("action")),data,complete,content_type)};window.ajax_submit=ajax_submit;export var get_page=function(elem){if(elem.hasClass(".tab-pane"))return elem;else return elem.closest(".tab-pane")};export var get_table_type=function(elem){var tabsort=elem.find(".tabsort");if(tabsort.length==0)var tabsort=get_page(elem).find(".tabsort");if(tabsort.length>0){var ret=tabsort.attr("table_type");if(ret)return ret}return""};export var can_popup=function(){if(jQuery(".modal-open").length>0)return false;
else return true};export var corect_href=function(href,only_table){if(typeof only_table=="undefined"||only_table!=null&&only_table.hasOwnProperty("__kwargtrans__"))var only_table=false;if(!href)return href;if(only_table){if(__in__("only_table",href))return href}else if(__in__("only_content",href))return href;if(only_table)if(__in__("?",href))return href+"&only_table=1";else return href+"?only_table=1";else if(__in__("?",href))return href+"&only_content=1";else return href+"?only_content=1"};export var remove_page_from_href=
function(href){var x=href.py_split("?");if(len(x)>1){var x2=x[1].py_split("&");if(len(x2)>1){var x3=[];for(var pos of x2)if(!__in__("page=",pos))x3.append(pos);return x[0]+"?"+"".join(x3)}else if(__in__("page=",x2[0]))return x2;else return href}return href};export var load_css=function(path){if(!(LOADED_FILES&&__in__(path,LOADED_FILES))){LOADED_FILES[path]=null;var req=new XMLHttpRequest;var _onload=function(){jQuery('<style type="text/css"></style>').html(req.responseText).appendTo("head")};req.onload=
_onload;req.open("GET",path,true);req.send("")}};window.load_css=load_css;var load_css=function(path,on_load){if(typeof on_load=="undefined"||on_load!=null&&on_load.hasOwnProperty("__kwargtrans__"))var on_load=null;if(!(LOADED_FILES&&__in__(path,LOADED_FILES))){LOADED_FILES[path]=null;var req=new XMLHttpRequest;var _onload=function(){if(on_load)on_load(req);else jQuery('<style type="text/css"></style>').html(req.responseText).appendTo("head")};req.onload=_onload;req.open("GET",path,true);req.send("")}};
export var on_load_js=function(path){if(LOADED_FILES&&__in__(path,LOADED_FILES)){var functions=LOADED_FILES[path];if(functions)for(var fun of functions)fun();LOADED_FILES[path]=null}};export var load_js=function(path,fun){if(LOADED_FILES&&__in__(path,LOADED_FILES))if(LOADED_FILES[path])LOADED_FILES[path].push(fun);else fun();else{LOADED_FILES[path]=[fun];var req=new XMLHttpRequest;var _onload=function(){var _requirejs=window.requirejs;var _require=window.require;var _define=window.define;window.requirejs=
null;window.require=null;window.define=null;var script=document.createElement("script");script.text=req.responseText;document.head.appendChild(script).parentNode.removeChild(script);window.requirejs=_requirejs;window.require=_require;window.define=_define;on_load_js(path)};req.onload=_onload;req.open("GET",path,true);req.send("")}};window.load_js=load_js;export var load_many_js=function(paths,fun){var counter=1;var next_step=null;var _fun=function(){counter=counter-1;if(counter==0)if(next_step!=null)load_many_js(next_step,
fun);else fun()};for(var path of paths)if(path.length>0)if(next_step!=null)next_step.append(path);else if(path=="|")var next_step=[];else{var counter=counter+1;load_js(path,_fun)}_fun()};window.load_many_js=load_many_js;export var history_push_state=function(title,url,data){if(typeof data=="undefined"||data!=null&&data.hasOwnProperty("__kwargtrans__"))var data=null;var url2=url.py_split("?")[0];if(data)var data2=[LZString.compress(data[0]),data[1]];else var data2=title;window.history.pushState(data2,
title,url2)};window.history_push_state=history_push_state;export var animate_combo=function(button,obj1,obj2,obj1_style_off,obj1_style_on,obj2_style_off,obj2_style_on,speed,end){if(typeof end=="undefined"||end!=null&&end.hasOwnProperty("__kwargtrans__"))var end=null;if(end)var end2=end;else var end2=function(){};var _animate=function(){if(button.hasClass("on")){button.removeClass("on");obj1.animate(obj1_style_off,speed);obj2.animate(obj2_style_off,speed,"swing",end2)}else{button.addClass("on");obj1.animate(obj1_style_on,
speed);obj2.animate(obj2_style_on,speed,"swing",end2)}};button.click(_animate)};window.animate_combo=animate_combo;window.icons=dict({"time":"fa fa-clock-o","date":"fa fa-calendar","up":"fa fa-chevron-up","down":"fa fa-chevron-down","previous":"fa fa-chevron-left","next":"fa fa-chevron-right","today":"fa fa-calendar-check-o","clear":"fa fa-trash","close":"fa fa-times","paginationSwitchDown":"fa-chevron-down","paginationSwitchUp":"fa-chevron-up","refresh":"fa-refresh","toggle":"fa-list-alt","columns":"fa-th",
"detailOpen":"fa-plus","detailClose":"fa-minus"});export var get_and_run_script=function(url,elem,e){try{__import__()}catch(__except0__){}};export var register_resize_fun=function(fun,priority){if(typeof priority=="undefined"||priority!=null&&priority.hasOwnProperty("__kwargtrans__"))var priority=0;RESIZE_FUN.append(tuple([fun,priority]))};window.register_resize_fun=register_resize_fun;export var process_resize=function(){var sort_fun=function(elem1,elem2){if(elem1[1]>elem2[1])return 1;else if(elem1[1]==
elem2[1])return 0;else return-1};for(var pos of RESIZE_FUN.sort(sort_fun))pos[0]()};window.process_resize=process_resize;export var send_to_dom=function(html_text,base_elem){if(__in__("===",html_text))if(__in__("===>>",html_text)){var x=html_text.py_split("===>>");var html=x[0];var py_selector=x[1].strip();var py_replace=false}else if(__in__("===>",html_text)){var x=html_text.py_split("===>");var html=x[0];var py_selector=x[1].strip();var py_replace=true}else{var x=html_text.py_split("===>");var html=
x[0];var py_selector=x[1].strip();var py_replace=true}else{var html=html_text;var py_selector="|";var py_replace=false}if(py_selector=="|")var elem=jQuery(base_elem);else if(py_selector.startswith("^"))var elem=jQuery(py_selector.__getslice__(1,null,1));else var elem=jQuery(base_elem).find(py_selector.py_replace("|",""));if(py_replace)elem.html(html);else elem.append(html);return true};window.send_to_dom=send_to_dom;export var get_elem_from_string=function(html,selectors){if(typeof selectors=="undefined"||
selectors!=null&&selectors.hasOwnProperty("__kwargtrans__"))var selectors=null;var temp=document.createElement("div");temp.innerHTML=html;if(selectors){var element=temp.querySelector(selectors);return element}else return temp};window.get_elem_from_string=get_elem_from_string;export var is_hidden=function(el){var style=window.getComputedStyle(el);return style.display=="none"};window.is_hidden=is_hidden;export var is_visible=function(el){return!is_hidden(el)};window.is_visible=is_visible;export var TEMPLATES=
dict({"MODAL_EDIT":rc.MODAL_EDIT,"MODAL_INFO":rc.MODAL_INFO,"MODAL_DELETE":rc.MODAL_DELETE,"MODAL_ERROR":rc.MODAL_ERROR,"INLINE_EDIT":rc.INLINE_EDIT,"INLINE_INFO":rc.INLINE_INFO,"INLINE_DELETE":rc.INLINE_DELETE,"INLINE_ERROR":rc.INLINE_ERROR});export var get_template=function(template_name,param){if(__in__(template_name,TEMPLATES))return TEMPLATES[template_name].format(param);return null};export var get_ajax_region=function(element){if(element.classList.contains("ajax-region"))return element;else return element.closest(".ajax-region")};
export var get_ajax_link=function(element){if(element.classList.contains("ajax-link"))return element;var region=get_ajax_region(element);if(region)if(region.classList.contains("ajax-link"))return region;else return region.querySelector("ajax-link");return null};export var get_ajax_frame=function(element){var region=get_ajax_region(element);if(region)if(region.classList.contains("ajax-frame"))return region;else return region.querySelector("ajax-frame");return null};export var super_query_selector=
function(element,py_selector){var x=py_selector.py_split("/");var e=element;for(var pos of x){if(pos=="..")var e=e.parentElement;else if(pos==".");else if(pos.startswith("^"))var e=e.closest(pos.__getslice__(1,null,1));else var e=e.querySelector(pos);if(!e)return null}return e};export var super_insert=function(base_element,py_selector,inserted_element){if(py_selector&&__in__(":",py_selector)){var x=py_selector.py_split(":");if(x[0])var element=super_query_selector(base_element,x[0]);else var element=
base_element;var selector2=x[1]}else{if(py_selector)var element=super_query_selector(base_element,py_selector);else var element=base_element;var selector2=null}if(!element)return null;if(selector2=="overwrite"){element.innerHTML="";element.appendChild(inserted_element)}else if(selector2=="append_first")element.insertBefore(inserted_element,element.firstChild);else if(selector2=="after")element.parentElement.insertBefore(inserted_element,element.nextSibling);else if(selector2=="before")element.parentElement.insertBefore(inserted_element,
element);else element.parentElement.insertBefore(inserted_element,element.nextSibling);return element};export var Loading=__class__("Loading",[object],{__module__:__name__,get __init__(){return __get__(this,function(self,element){self.load_type=null;self.element=element;if(element)if(element.classList.contains("ladda-button")){self.load_type="ladda";self.ladda=null}if(!self.load_type){var loading_indicator=document.getElementById("loading-indicator");if(loading_indicator){self.load_type="global";
self.loading_indicator=loading_indicator}}})},get create(){return __get__(this,function(self){if(self.load_type=="ladda")self.ladda=window.Ladda.create(self.element)})},get start(){return __get__(this,function(self){if(self.load_type=="ladda"&&self.ladda)self.ladda.start();else if(self.load_type=="global")self.loading_indicator.style.display="block"})},get set_progress(){return __get__(this,function(self,progress){if(self.load_type=="ladda"&&self.ladda)self.ladda.setProgress(progress)})},get stop(){return __get__(this,
function(self){if(self.load_type=="ladda"&&self.ladda)self.ladda.stop();else if(self.load_type=="global")self.loading_indicator.style.display="none"})},get remove(){return __get__(this,function(self){if(self.load_type=="ladda"&&self.ladda){self.ladda.remove();self.ladda=null}})}});export var remove_element=function(element){var _on_remove=function(index,value){value.on_remove()};jQuery.each(jQuery(element).find(".call_on_remove"),_on_remove);var _on_remove_aside=function(index,value){var dialog=value.firstElementChild;
if(dialog&&dialog.hasAttribute("modal"))jQuery(dialog).modal("hide");else aside.remove()};jQuery.each(jQuery(element).find("aside"),_on_remove_aside);element.remove()};

//# sourceMappingURL=pytigon_js.tools.map