{# -*- coding: utf-8 -*- #}
{% extends "form.html" %}
{% load exfiltry %}
{% load exsyntax %}
{% block pythoncode %}
        <script language="python">
        def signal_from_child(self, child, signal):
            if signal=='set_bitmap_list':
                bitmaps = {
                    "gen": "wx.ART_EXECUTABLE_FILE",
                    "gen2": "client://categories/applications-multimedia.png",
                    "oper_imp_lokal", "client://status/dialog-information.png"
                    "spr_praw": wx.ART_TIP
                }
                child.set_bitmaps(bitmaps)
        def filter_url(self, target, href):
            return href
</script>
{% endblock %}
{% block all %}
        {% with form_width=520 form_height=620 table_type='datatable' %}
                {{ block.super }}
        {% endwith %}
{% endblock %}
{% block scroll %}{% endblock %}
{% block list_content_actions %}
        {% if perms.prawa.add_operator %}
                {% new_row "Nowy pracownik" %}
        {% endif %}
        {% list_action "oper_import" "Importuj operatorów" %}
        {% list_action "spr_praw" "Sprawdzenie praw" %}
        {% list_action "regenerate_user_groups" "Generowanie aktualnych uprawnień" %}
        {% list_action "gen_wnioski_wg_softlaba" "Wnioski wg Softlaba" %}
{% endblock %}
{% block list_row_header %}
        <th>Aktywny</th>
        <th>Login</th>
        <th>Imię</th>
        <th>Nazwisko</th>
        <th>Dział</th>
        <th>Lokalizacja</th>
        <th>Przełożony</th>
{% endblock %}
{% block list_row_attr %}
        {% if not object.aktywny %}class=danger{% endif %}
{% endblock %}
{% block list_row %}
        <td align="center">
                {% if object.aktywny %}
                        &#10004;
                {% endif %}
        </td>
        <td>{{object.login}}</td>
        <td>{{object.imie}}</td>
        <td>{{object.nazwisko}}</td>
        <td>{{object.dzial.opis}}</td>
        <td>{{object.lokalizacja}}</td>
        <td>{{object.przelozony}}</td>
{% endblock %}
{% block dialog_type %}
        modal-lg
{% endblock %}
{% block id_extra %}
        {% if object.has_attachements %}
                {% row_actions %}
                        field_action,Attachements,fa fa-2x fa-paperclip,,,+bg-primary,../../../../../../schattachements/table/Attachements//prawa__Operator__{{object.id}}__potwierdzenia/form/list/
                {% endrow_actions %}
          {% else %}
                {% row_actions %}
                        field_action,Attachements,fa fa-2x fa-paperclip,,,,../../../../../../schattachements/table/Attachements//prawa__Operator__{{object.id}}__potwierdzenia/form/list/
                {% endrow_actions %}
        {% endif %}
{% endblock %}
{% block list_row_actions %}
        {% if perms.prawa.change_operator %}
                {% row_actions %}
                edit;gen-popup_edit,Zmień uprawnienia
                {% endrow_actions %}
        {% endif %}
        {% if perms.prawa.delete_operator %}
                {% row_actions %}
                delete
                {% endrow_actions %}
        {% endif %}
{% endblock %}

